name: push image and push to aliyun

on:
  push:
    branches: 
      - publish

env:
  DOCKERHUB_USERNAME: newbe36524
  DOCKERHUB_NAMESPACE: newbe36524
  ALIYUN_USERNAME: pianzide1117
  ALIYUN_NAMESPACE: newbe36524
  TENCENTYUN_USERNAME: 472158246
  TENCENTYUN_NAMESPACE: mcr_newbe36524
jobs:
  build:

    runs-on: ubuntu-latest
    strategy:
      matrix:
        image: 
          - mcr.microsoft.com/dotnet/core/sdk:2.1,sdk:2.1
          - mcr.microsoft.com/dotnet/core/sdk:2.1.809,sdk:2.1.809
          - mcr.microsoft.com/dotnet/core/sdk:2.1.809-alpine,sdk:2.1.809-alpine
          - mcr.microsoft.com/dotnet/core/sdk:2.1.809-alpine3.11,sdk:2.1.809-alpine3.11
          - mcr.microsoft.com/dotnet/core/sdk:2.1.809-alpine3.12,sdk:2.1.809-alpine3.12
          - mcr.microsoft.com/dotnet/core/sdk:2.1.809-bionic,sdk:2.1.809-bionic
          - mcr.microsoft.com/dotnet/core/sdk:2.1.809-bionic-arm32v7,sdk:2.1.809-bionic-arm32v7
          - mcr.microsoft.com/dotnet/core/sdk:2.1.809-focal,sdk:2.1.809-focal
          - mcr.microsoft.com/dotnet/core/sdk:2.1.809-focal-arm32v7,sdk:2.1.809-focal-arm32v7
          - mcr.microsoft.com/dotnet/core/sdk:2.1.809-stretch,sdk:2.1.809-stretch
          - mcr.microsoft.com/dotnet/core/sdk:2.1.809-stretch-arm32v7,sdk:2.1.809-stretch-arm32v7
          - mcr.microsoft.com/dotnet/core/sdk:2.1-alpine,sdk:2.1-alpine
          - mcr.microsoft.com/dotnet/core/sdk:2.1-alpine3.11,sdk:2.1-alpine3.11
          - mcr.microsoft.com/dotnet/core/sdk:2.1-alpine3.12,sdk:2.1-alpine3.12
          - mcr.microsoft.com/dotnet/core/sdk:2.1-bionic,sdk:2.1-bionic
          - mcr.microsoft.com/dotnet/core/sdk:2.1-bionic-arm32v7,sdk:2.1-bionic-arm32v7
          - mcr.microsoft.com/dotnet/core/sdk:2.1-focal,sdk:2.1-focal
          - mcr.microsoft.com/dotnet/core/sdk:2.1-focal-arm32v7,sdk:2.1-focal-arm32v7
          - mcr.microsoft.com/dotnet/core/sdk:2.1-stretch,sdk:2.1-stretch
          - mcr.microsoft.com/dotnet/core/sdk:2.1-stretch-arm32v7,sdk:2.1-stretch-arm32v7
          - mcr.microsoft.com/dotnet/core/sdk:3.1,sdk:3.1
          - mcr.microsoft.com/dotnet/core/sdk:3.1.401,sdk:3.1.401
          - mcr.microsoft.com/dotnet/core/sdk:3.1.401-alpine,sdk:3.1.401-alpine
          - mcr.microsoft.com/dotnet/core/sdk:3.1.401-alpine3.11,sdk:3.1.401-alpine3.11
          - mcr.microsoft.com/dotnet/core/sdk:3.1.401-alpine3.12,sdk:3.1.401-alpine3.12
          - mcr.microsoft.com/dotnet/core/sdk:3.1.401-bionic,sdk:3.1.401-bionic
          - mcr.microsoft.com/dotnet/core/sdk:3.1.401-bionic-arm32v7,sdk:3.1.401-bionic-arm32v7
          - mcr.microsoft.com/dotnet/core/sdk:3.1.401-bionic-arm64v8,sdk:3.1.401-bionic-arm64v8
          - mcr.microsoft.com/dotnet/core/sdk:3.1.401-buster,sdk:3.1.401-buster
          - mcr.microsoft.com/dotnet/core/sdk:3.1.401-buster-arm32v7,sdk:3.1.401-buster-arm32v7
          - mcr.microsoft.com/dotnet/core/sdk:3.1.401-buster-arm64v8,sdk:3.1.401-buster-arm64v8
          - mcr.microsoft.com/dotnet/core/sdk:3.1.401-focal,sdk:3.1.401-focal
          - mcr.microsoft.com/dotnet/core/sdk:3.1.401-focal-arm32v7,sdk:3.1.401-focal-arm32v7
          - mcr.microsoft.com/dotnet/core/sdk:3.1.401-focal-arm64v8,sdk:3.1.401-focal-arm64v8
          - mcr.microsoft.com/dotnet/core/sdk:3.1-alpine,sdk:3.1-alpine
          - mcr.microsoft.com/dotnet/core/sdk:3.1-alpine3.11,sdk:3.1-alpine3.11
          - mcr.microsoft.com/dotnet/core/sdk:3.1-alpine3.12,sdk:3.1-alpine3.12
          - mcr.microsoft.com/dotnet/core/sdk:3.1-bionic,sdk:3.1-bionic
          - mcr.microsoft.com/dotnet/core/sdk:3.1-bionic-arm32v7,sdk:3.1-bionic-arm32v7
          - mcr.microsoft.com/dotnet/core/sdk:3.1-bionic-arm64v8,sdk:3.1-bionic-arm64v8
          - mcr.microsoft.com/dotnet/core/sdk:3.1-buster,sdk:3.1-buster
          - mcr.microsoft.com/dotnet/core/sdk:3.1-buster-arm32v7,sdk:3.1-buster-arm32v7
          - mcr.microsoft.com/dotnet/core/sdk:3.1-buster-arm64v8,sdk:3.1-buster-arm64v8
          - mcr.microsoft.com/dotnet/core/sdk:3.1-focal,sdk:3.1-focal
          - mcr.microsoft.com/dotnet/core/sdk:3.1-focal-arm32v7,sdk:3.1-focal-arm32v7
          - mcr.microsoft.com/dotnet/core/sdk:3.1-focal-arm64v8,sdk:3.1-focal-arm64v8
          - mcr.microsoft.com/dotnet/core/sdk:latest,sdk:latest
          - mcr.microsoft.com/dotnet/core/runtime-deps:2.1,runtime-deps:2.1
          - mcr.microsoft.com/dotnet/core/runtime-deps:2.1.21,runtime-deps:2.1.21
          - mcr.microsoft.com/dotnet/core/runtime-deps:2.1.21-alpine,runtime-deps:2.1.21-alpine
          - mcr.microsoft.com/dotnet/core/runtime-deps:2.1.21-alpine3.11,runtime-deps:2.1.21-alpine3.11
          - mcr.microsoft.com/dotnet/core/runtime-deps:2.1.21-alpine3.12,runtime-deps:2.1.21-alpine3.12
          - mcr.microsoft.com/dotnet/core/runtime-deps:2.1.21-bionic,runtime-deps:2.1.21-bionic
          - mcr.microsoft.com/dotnet/core/runtime-deps:2.1.21-bionic-arm32v7,runtime-deps:2.1.21-bionic-arm32v7
          - mcr.microsoft.com/dotnet/core/runtime-deps:2.1.21-focal,runtime-deps:2.1.21-focal
          - mcr.microsoft.com/dotnet/core/runtime-deps:2.1.21-focal-arm32v7,runtime-deps:2.1.21-focal-arm32v7
          - mcr.microsoft.com/dotnet/core/runtime-deps:2.1.21-stretch-slim,runtime-deps:2.1.21-stretch-slim
          - mcr.microsoft.com/dotnet/core/runtime-deps:2.1.21-stretch-slim-arm32v7,runtime-deps:2.1.21-stretch-slim-arm32v7
          - mcr.microsoft.com/dotnet/core/runtime-deps:2.1-alpine,runtime-deps:2.1-alpine
          - mcr.microsoft.com/dotnet/core/runtime-deps:2.1-alpine3.11,runtime-deps:2.1-alpine3.11
          - mcr.microsoft.com/dotnet/core/runtime-deps:2.1-alpine3.12,runtime-deps:2.1-alpine3.12
          - mcr.microsoft.com/dotnet/core/runtime-deps:2.1-bionic,runtime-deps:2.1-bionic
          - mcr.microsoft.com/dotnet/core/runtime-deps:2.1-bionic-arm32v7,runtime-deps:2.1-bionic-arm32v7
          - mcr.microsoft.com/dotnet/core/runtime-deps:2.1-focal,runtime-deps:2.1-focal
          - mcr.microsoft.com/dotnet/core/runtime-deps:2.1-focal-arm32v7,runtime-deps:2.1-focal-arm32v7
          - mcr.microsoft.com/dotnet/core/runtime-deps:2.1-stretch-slim,runtime-deps:2.1-stretch-slim
          - mcr.microsoft.com/dotnet/core/runtime-deps:2.1-stretch-slim-arm32v7,runtime-deps:2.1-stretch-slim-arm32v7
          - mcr.microsoft.com/dotnet/core/runtime-deps:3.1,runtime-deps:3.1
          - mcr.microsoft.com/dotnet/core/runtime-deps:3.1.7,runtime-deps:3.1.7
          - mcr.microsoft.com/dotnet/core/runtime-deps:3.1.7-alpine,runtime-deps:3.1.7-alpine
          - mcr.microsoft.com/dotnet/core/runtime-deps:3.1.7-alpine3.11,runtime-deps:3.1.7-alpine3.11
          - mcr.microsoft.com/dotnet/core/runtime-deps:3.1.7-alpine3.11-arm64v8,runtime-deps:3.1.7-alpine3.11-arm64v8
          - mcr.microsoft.com/dotnet/core/runtime-deps:3.1.7-alpine3.12,runtime-deps:3.1.7-alpine3.12
          - mcr.microsoft.com/dotnet/core/runtime-deps:3.1.7-alpine3.12-arm64v8,runtime-deps:3.1.7-alpine3.12-arm64v8
          - mcr.microsoft.com/dotnet/core/runtime-deps:3.1.7-alpine-arm64v8,runtime-deps:3.1.7-alpine-arm64v8
          - mcr.microsoft.com/dotnet/core/runtime-deps:3.1.7-bionic,runtime-deps:3.1.7-bionic
          - mcr.microsoft.com/dotnet/core/runtime-deps:3.1.7-bionic-arm32v7,runtime-deps:3.1.7-bionic-arm32v7
          - mcr.microsoft.com/dotnet/core/runtime-deps:3.1.7-bionic-arm64v8,runtime-deps:3.1.7-bionic-arm64v8
          - mcr.microsoft.com/dotnet/core/runtime-deps:3.1.7-buster-slim,runtime-deps:3.1.7-buster-slim
          - mcr.microsoft.com/dotnet/core/runtime-deps:3.1.7-buster-slim-arm32v7,runtime-deps:3.1.7-buster-slim-arm32v7
          - mcr.microsoft.com/dotnet/core/runtime-deps:3.1.7-buster-slim-arm64v8,runtime-deps:3.1.7-buster-slim-arm64v8
          - mcr.microsoft.com/dotnet/core/runtime-deps:3.1.7-focal,runtime-deps:3.1.7-focal
          - mcr.microsoft.com/dotnet/core/runtime-deps:3.1.7-focal-arm32v7,runtime-deps:3.1.7-focal-arm32v7
          - mcr.microsoft.com/dotnet/core/runtime-deps:3.1.7-focal-arm64v8,runtime-deps:3.1.7-focal-arm64v8
          - mcr.microsoft.com/dotnet/core/runtime-deps:3.1-alpine,runtime-deps:3.1-alpine
          - mcr.microsoft.com/dotnet/core/runtime-deps:3.1-alpine3.11,runtime-deps:3.1-alpine3.11
          - mcr.microsoft.com/dotnet/core/runtime-deps:3.1-alpine3.11-arm64v8,runtime-deps:3.1-alpine3.11-arm64v8
          - mcr.microsoft.com/dotnet/core/runtime-deps:3.1-alpine3.12,runtime-deps:3.1-alpine3.12
          - mcr.microsoft.com/dotnet/core/runtime-deps:3.1-alpine3.12-arm64v8,runtime-deps:3.1-alpine3.12-arm64v8
          - mcr.microsoft.com/dotnet/core/runtime-deps:3.1-alpine-arm64v8,runtime-deps:3.1-alpine-arm64v8
          - mcr.microsoft.com/dotnet/core/runtime-deps:3.1-bionic,runtime-deps:3.1-bionic
          - mcr.microsoft.com/dotnet/core/runtime-deps:3.1-bionic-arm32v7,runtime-deps:3.1-bionic-arm32v7
          - mcr.microsoft.com/dotnet/core/runtime-deps:3.1-bionic-arm64v8,runtime-deps:3.1-bionic-arm64v8
          - mcr.microsoft.com/dotnet/core/runtime-deps:3.1-buster-slim,runtime-deps:3.1-buster-slim
          - mcr.microsoft.com/dotnet/core/runtime-deps:3.1-buster-slim-arm32v7,runtime-deps:3.1-buster-slim-arm32v7
          - mcr.microsoft.com/dotnet/core/runtime-deps:3.1-buster-slim-arm64v8,runtime-deps:3.1-buster-slim-arm64v8
          - mcr.microsoft.com/dotnet/core/runtime-deps:3.1-focal,runtime-deps:3.1-focal
          - mcr.microsoft.com/dotnet/core/runtime-deps:3.1-focal-arm32v7,runtime-deps:3.1-focal-arm32v7
          - mcr.microsoft.com/dotnet/core/runtime-deps:3.1-focal-arm64v8,runtime-deps:3.1-focal-arm64v8
          - mcr.microsoft.com/dotnet/core/runtime-deps:latest,runtime-deps:latest
          - mcr.microsoft.com/dotnet/core/runtime:2.1,runtime:2.1
          - mcr.microsoft.com/dotnet/core/runtime:2.1.21,runtime:2.1.21
          - mcr.microsoft.com/dotnet/core/runtime:2.1.21-alpine,runtime:2.1.21-alpine
          - mcr.microsoft.com/dotnet/core/runtime:2.1.21-alpine3.11,runtime:2.1.21-alpine3.11
          - mcr.microsoft.com/dotnet/core/runtime:2.1.21-alpine3.12,runtime:2.1.21-alpine3.12
          - mcr.microsoft.com/dotnet/core/runtime:2.1.21-bionic,runtime:2.1.21-bionic
          - mcr.microsoft.com/dotnet/core/runtime:2.1.21-bionic-arm32v7,runtime:2.1.21-bionic-arm32v7
          - mcr.microsoft.com/dotnet/core/runtime:2.1.21-focal,runtime:2.1.21-focal
          - mcr.microsoft.com/dotnet/core/runtime:2.1.21-focal-arm32v7,runtime:2.1.21-focal-arm32v7
          - mcr.microsoft.com/dotnet/core/runtime:2.1.21-stretch-slim,runtime:2.1.21-stretch-slim
          - mcr.microsoft.com/dotnet/core/runtime:2.1.21-stretch-slim-arm32v7,runtime:2.1.21-stretch-slim-arm32v7
          - mcr.microsoft.com/dotnet/core/runtime:2.1-alpine,runtime:2.1-alpine
          - mcr.microsoft.com/dotnet/core/runtime:2.1-alpine3.11,runtime:2.1-alpine3.11
          - mcr.microsoft.com/dotnet/core/runtime:2.1-alpine3.12,runtime:2.1-alpine3.12
          - mcr.microsoft.com/dotnet/core/runtime:2.1-bionic,runtime:2.1-bionic
          - mcr.microsoft.com/dotnet/core/runtime:2.1-bionic-arm32v7,runtime:2.1-bionic-arm32v7
          - mcr.microsoft.com/dotnet/core/runtime:2.1-focal,runtime:2.1-focal
          - mcr.microsoft.com/dotnet/core/runtime:2.1-focal-arm32v7,runtime:2.1-focal-arm32v7
          - mcr.microsoft.com/dotnet/core/runtime:2.1-stretch-slim,runtime:2.1-stretch-slim
          - mcr.microsoft.com/dotnet/core/runtime:2.1-stretch-slim-arm32v7,runtime:2.1-stretch-slim-arm32v7
          - mcr.microsoft.com/dotnet/core/runtime:3.1,runtime:3.1
          - mcr.microsoft.com/dotnet/core/runtime:3.1.7,runtime:3.1.7
          - mcr.microsoft.com/dotnet/core/runtime:3.1.7-alpine,runtime:3.1.7-alpine
          - mcr.microsoft.com/dotnet/core/runtime:3.1.7-alpine3.11,runtime:3.1.7-alpine3.11
          - mcr.microsoft.com/dotnet/core/runtime:3.1.7-alpine3.11-arm64v8,runtime:3.1.7-alpine3.11-arm64v8
          - mcr.microsoft.com/dotnet/core/runtime:3.1.7-alpine3.12,runtime:3.1.7-alpine3.12
          - mcr.microsoft.com/dotnet/core/runtime:3.1.7-alpine3.12-arm64v8,runtime:3.1.7-alpine3.12-arm64v8
          - mcr.microsoft.com/dotnet/core/runtime:3.1.7-alpine-arm64v8,runtime:3.1.7-alpine-arm64v8
          - mcr.microsoft.com/dotnet/core/runtime:3.1.7-bionic,runtime:3.1.7-bionic
          - mcr.microsoft.com/dotnet/core/runtime:3.1.7-bionic-arm32v7,runtime:3.1.7-bionic-arm32v7
          - mcr.microsoft.com/dotnet/core/runtime:3.1.7-bionic-arm64v8,runtime:3.1.7-bionic-arm64v8
          - mcr.microsoft.com/dotnet/core/runtime:3.1.7-buster-slim,runtime:3.1.7-buster-slim
          - mcr.microsoft.com/dotnet/core/runtime:3.1.7-buster-slim-arm32v7,runtime:3.1.7-buster-slim-arm32v7
          - mcr.microsoft.com/dotnet/core/runtime:3.1.7-buster-slim-arm64v8,runtime:3.1.7-buster-slim-arm64v8
          - mcr.microsoft.com/dotnet/core/runtime:3.1.7-focal,runtime:3.1.7-focal
          - mcr.microsoft.com/dotnet/core/runtime:3.1.7-focal-arm32v7,runtime:3.1.7-focal-arm32v7
          - mcr.microsoft.com/dotnet/core/runtime:3.1.7-focal-arm64v8,runtime:3.1.7-focal-arm64v8
          - mcr.microsoft.com/dotnet/core/runtime:3.1-alpine,runtime:3.1-alpine
          - mcr.microsoft.com/dotnet/core/runtime:3.1-alpine3.11,runtime:3.1-alpine3.11
          - mcr.microsoft.com/dotnet/core/runtime:3.1-alpine3.11-arm64v8,runtime:3.1-alpine3.11-arm64v8
          - mcr.microsoft.com/dotnet/core/runtime:3.1-alpine3.12,runtime:3.1-alpine3.12
          - mcr.microsoft.com/dotnet/core/runtime:3.1-alpine3.12-arm64v8,runtime:3.1-alpine3.12-arm64v8
          - mcr.microsoft.com/dotnet/core/runtime:3.1-alpine-arm64v8,runtime:3.1-alpine-arm64v8
          - mcr.microsoft.com/dotnet/core/runtime:3.1-bionic,runtime:3.1-bionic
          - mcr.microsoft.com/dotnet/core/runtime:3.1-bionic-arm32v7,runtime:3.1-bionic-arm32v7
          - mcr.microsoft.com/dotnet/core/runtime:3.1-bionic-arm64v8,runtime:3.1-bionic-arm64v8
          - mcr.microsoft.com/dotnet/core/runtime:3.1-buster-slim,runtime:3.1-buster-slim
          - mcr.microsoft.com/dotnet/core/runtime:3.1-buster-slim-arm32v7,runtime:3.1-buster-slim-arm32v7
          - mcr.microsoft.com/dotnet/core/runtime:3.1-buster-slim-arm64v8,runtime:3.1-buster-slim-arm64v8
          - mcr.microsoft.com/dotnet/core/runtime:3.1-focal,runtime:3.1-focal
          - mcr.microsoft.com/dotnet/core/runtime:3.1-focal-arm32v7,runtime:3.1-focal-arm32v7
          - mcr.microsoft.com/dotnet/core/runtime:3.1-focal-arm64v8,runtime:3.1-focal-arm64v8
          - mcr.microsoft.com/dotnet/core/runtime:latest,runtime:latest
          - mcr.microsoft.com/dotnet/core/aspnet:2.1,aspnet:2.1
          - mcr.microsoft.com/dotnet/core/aspnet:2.1.21,aspnet:2.1.21
          - mcr.microsoft.com/dotnet/core/aspnet:2.1.21-alpine,aspnet:2.1.21-alpine
          - mcr.microsoft.com/dotnet/core/aspnet:2.1.21-alpine3.11,aspnet:2.1.21-alpine3.11
          - mcr.microsoft.com/dotnet/core/aspnet:2.1.21-alpine3.12,aspnet:2.1.21-alpine3.12
          - mcr.microsoft.com/dotnet/core/aspnet:2.1.21-bionic,aspnet:2.1.21-bionic
          - mcr.microsoft.com/dotnet/core/aspnet:2.1.21-bionic-arm32v7,aspnet:2.1.21-bionic-arm32v7
          - mcr.microsoft.com/dotnet/core/aspnet:2.1.21-focal,aspnet:2.1.21-focal
          - mcr.microsoft.com/dotnet/core/aspnet:2.1.21-focal-arm32v7,aspnet:2.1.21-focal-arm32v7
          - mcr.microsoft.com/dotnet/core/aspnet:2.1.21-stretch-slim,aspnet:2.1.21-stretch-slim
          - mcr.microsoft.com/dotnet/core/aspnet:2.1.21-stretch-slim-arm32v7,aspnet:2.1.21-stretch-slim-arm32v7
          - mcr.microsoft.com/dotnet/core/aspnet:2.1-alpine,aspnet:2.1-alpine
          - mcr.microsoft.com/dotnet/core/aspnet:2.1-alpine3.11,aspnet:2.1-alpine3.11
          - mcr.microsoft.com/dotnet/core/aspnet:2.1-alpine3.12,aspnet:2.1-alpine3.12
          - mcr.microsoft.com/dotnet/core/aspnet:2.1-bionic,aspnet:2.1-bionic
          - mcr.microsoft.com/dotnet/core/aspnet:2.1-bionic-arm32v7,aspnet:2.1-bionic-arm32v7
          - mcr.microsoft.com/dotnet/core/aspnet:2.1-focal,aspnet:2.1-focal
          - mcr.microsoft.com/dotnet/core/aspnet:2.1-focal-arm32v7,aspnet:2.1-focal-arm32v7
          - mcr.microsoft.com/dotnet/core/aspnet:2.1-stretch-slim,aspnet:2.1-stretch-slim
          - mcr.microsoft.com/dotnet/core/aspnet:2.1-stretch-slim-arm32v7,aspnet:2.1-stretch-slim-arm32v7
          - mcr.microsoft.com/dotnet/core/aspnet:3.1,aspnet:3.1
          - mcr.microsoft.com/dotnet/core/aspnet:3.1.7,aspnet:3.1.7
          - mcr.microsoft.com/dotnet/core/aspnet:3.1.7-alpine,aspnet:3.1.7-alpine
          - mcr.microsoft.com/dotnet/core/aspnet:3.1.7-alpine3.11,aspnet:3.1.7-alpine3.11
          - mcr.microsoft.com/dotnet/core/aspnet:3.1.7-alpine3.11-arm64v8,aspnet:3.1.7-alpine3.11-arm64v8
          - mcr.microsoft.com/dotnet/core/aspnet:3.1.7-alpine3.12,aspnet:3.1.7-alpine3.12
          - mcr.microsoft.com/dotnet/core/aspnet:3.1.7-alpine3.12-arm64v8,aspnet:3.1.7-alpine3.12-arm64v8
          - mcr.microsoft.com/dotnet/core/aspnet:3.1.7-alpine-arm64v8,aspnet:3.1.7-alpine-arm64v8
          - mcr.microsoft.com/dotnet/core/aspnet:3.1.7-bionic,aspnet:3.1.7-bionic
          - mcr.microsoft.com/dotnet/core/aspnet:3.1.7-bionic-arm32v7,aspnet:3.1.7-bionic-arm32v7
          - mcr.microsoft.com/dotnet/core/aspnet:3.1.7-bionic-arm64v8,aspnet:3.1.7-bionic-arm64v8
          - mcr.microsoft.com/dotnet/core/aspnet:3.1.7-buster-slim,aspnet:3.1.7-buster-slim
          - mcr.microsoft.com/dotnet/core/aspnet:3.1.7-buster-slim-arm32v7,aspnet:3.1.7-buster-slim-arm32v7
          - mcr.microsoft.com/dotnet/core/aspnet:3.1.7-buster-slim-arm64v8,aspnet:3.1.7-buster-slim-arm64v8
          - mcr.microsoft.com/dotnet/core/aspnet:3.1.7-focal,aspnet:3.1.7-focal
          - mcr.microsoft.com/dotnet/core/aspnet:3.1.7-focal-arm32v7,aspnet:3.1.7-focal-arm32v7
          - mcr.microsoft.com/dotnet/core/aspnet:3.1.7-focal-arm64v8,aspnet:3.1.7-focal-arm64v8
          - mcr.microsoft.com/dotnet/core/aspnet:3.1-alpine,aspnet:3.1-alpine
          - mcr.microsoft.com/dotnet/core/aspnet:3.1-alpine3.11,aspnet:3.1-alpine3.11
          - mcr.microsoft.com/dotnet/core/aspnet:3.1-alpine3.11-arm64v8,aspnet:3.1-alpine3.11-arm64v8
          - mcr.microsoft.com/dotnet/core/aspnet:3.1-alpine3.12,aspnet:3.1-alpine3.12
          - mcr.microsoft.com/dotnet/core/aspnet:3.1-alpine3.12-arm64v8,aspnet:3.1-alpine3.12-arm64v8
          - mcr.microsoft.com/dotnet/core/aspnet:3.1-alpine-arm64v8,aspnet:3.1-alpine-arm64v8
          - mcr.microsoft.com/dotnet/core/aspnet:3.1-bionic,aspnet:3.1-bionic
          - mcr.microsoft.com/dotnet/core/aspnet:3.1-bionic-arm32v7,aspnet:3.1-bionic-arm32v7
          - mcr.microsoft.com/dotnet/core/aspnet:3.1-bionic-arm64v8,aspnet:3.1-bionic-arm64v8
          - mcr.microsoft.com/dotnet/core/aspnet:3.1-buster-slim,aspnet:3.1-buster-slim
          - mcr.microsoft.com/dotnet/core/aspnet:3.1-buster-slim-arm32v7,aspnet:3.1-buster-slim-arm32v7
          - mcr.microsoft.com/dotnet/core/aspnet:3.1-buster-slim-arm64v8,aspnet:3.1-buster-slim-arm64v8
          - mcr.microsoft.com/dotnet/core/aspnet:3.1-focal,aspnet:3.1-focal
          - mcr.microsoft.com/dotnet/core/aspnet:3.1-focal-arm32v7,aspnet:3.1-focal-arm32v7
          - mcr.microsoft.com/dotnet/core/aspnet:3.1-focal-arm64v8,aspnet:3.1-focal-arm64v8
          - mcr.microsoft.com/dotnet/core/aspnet:latest,aspnet:latest
          - mcr.microsoft.com/mssql/server:2017-CU10-ubuntu,server:2017-CU10-ubuntu
          - mcr.microsoft.com/mssql/server:2017-CU11-ubuntu,server:2017-CU11-ubuntu
          - mcr.microsoft.com/mssql/server:2017-CU12-ubuntu,server:2017-CU12-ubuntu
          - mcr.microsoft.com/mssql/server:2017-CU13-ubuntu,server:2017-CU13-ubuntu
          - mcr.microsoft.com/mssql/server:2017-CU14-ubuntu,server:2017-CU14-ubuntu
          - mcr.microsoft.com/mssql/server:2017-CU15-ubuntu,server:2017-CU15-ubuntu
          - mcr.microsoft.com/mssql/server:2017-CU16-ubuntu,server:2017-CU16-ubuntu
          - mcr.microsoft.com/mssql/server:2017-CU17-ubuntu,server:2017-CU17-ubuntu
          - mcr.microsoft.com/mssql/server:2017-CU18-ubuntu-16.04,server:2017-CU18-ubuntu-16.04
          - mcr.microsoft.com/mssql/server:2017-CU19-ubuntu-16.04,server:2017-CU19-ubuntu-16.04
          - mcr.microsoft.com/mssql/server:2017-CU1-ubuntu,server:2017-CU1-ubuntu
          - mcr.microsoft.com/mssql/server:2017-CU20-ubuntu-16.04,server:2017-CU20-ubuntu-16.04
          - mcr.microsoft.com/mssql/server:2017-CU21-ubuntu-16.04,server:2017-CU21-ubuntu-16.04
          - mcr.microsoft.com/mssql/server:2017-CU2-ubuntu,server:2017-CU2-ubuntu
          - mcr.microsoft.com/mssql/server:2017-CU3-ubuntu,server:2017-CU3-ubuntu
          - mcr.microsoft.com/mssql/server:2017-CU4-ubuntu,server:2017-CU4-ubuntu
          - mcr.microsoft.com/mssql/server:2017-CU5-ubuntu,server:2017-CU5-ubuntu
          - mcr.microsoft.com/mssql/server:2017-CU6-ubuntu,server:2017-CU6-ubuntu
          - mcr.microsoft.com/mssql/server:2017-CU7-ubuntu,server:2017-CU7-ubuntu
          - mcr.microsoft.com/mssql/server:2017-CU8-ubuntu,server:2017-CU8-ubuntu
          - mcr.microsoft.com/mssql/server:2017-CU9-ubuntu,server:2017-CU9-ubuntu
          - mcr.microsoft.com/mssql/server:2017-GA-ubuntu,server:2017-GA-ubuntu
          - mcr.microsoft.com/mssql/server:2017-GDR-ubuntu,server:2017-GDR-ubuntu
          - mcr.microsoft.com/mssql/server:2017-latest,server:2017-latest
          - mcr.microsoft.com/mssql/server:2019-CU1-ubuntu-16.04,server:2019-CU1-ubuntu-16.04
          - mcr.microsoft.com/mssql/server:2019-CU2-ubuntu-16.04,server:2019-CU2-ubuntu-16.04
          - mcr.microsoft.com/mssql/server:2019-CU3-ubuntu-16.04,server:2019-CU3-ubuntu-16.04
          - mcr.microsoft.com/mssql/server:2019-CU4-ubuntu-16.04,server:2019-CU4-ubuntu-16.04
          - mcr.microsoft.com/mssql/server:2019-CU5-ubuntu-16.04,server:2019-CU5-ubuntu-16.04
          - mcr.microsoft.com/mssql/server:2019-CU6-ubuntu-16.04,server:2019-CU6-ubuntu-16.04
          - mcr.microsoft.com/mssql/server:2019-GA-ubuntu-16.04,server:2019-GA-ubuntu-16.04
          - mcr.microsoft.com/mssql/server:2019-GDR1-ubuntu-16.04,server:2019-GDR1-ubuntu-16.04
          - mcr.microsoft.com/mssql/server:2019-latest,server:2019-latest
          - mcr.microsoft.com/mssql/server:latest,server:latest

    steps:
    - uses: actions/checkout@v2
    - name: Set up Python 3.8
      uses: actions/setup-python@v2
      with:
        python-version: 3.8
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        cd src/GithubActionGeneration
        pip install pipenv
        pipenv install
    - name: pull and sync
      run: |
        cd src/GithubActionGeneration
        pip install pipenv
        pipenv install
        pipenv run inv pull-image --data "${{ matrix.image }}"
        echo "${{ secrets.ALIYUN_TOKEN }}" | docker login -u $ALIYUN_USERNAME --password-stdin registry.cn-hangzhou.aliyuncs.com
        pipenv run inv docker-sync-aliyun --data "${{ matrix.image }}"
